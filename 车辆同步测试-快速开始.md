# è½¦è¾†åŒæ­¥æµ‹è¯• - å¿«é€Ÿå¼€å§‹æŒ‡å—

## æ¦‚è¿°

æœ¬æŒ‡å—æä¾›äº†VIPæœˆç¥¨å’Œé»‘åå•åŒæ­¥åŠŸèƒ½çš„å®Œæ•´æµ‹è¯•æ–¹æ³•ã€‚

## å‰ææ¡ä»¶

1. âœ… é¡¹ç›®å·²ç¼–è¯‘æˆåŠŸ
2. âœ… åº”ç”¨ç¨‹åºæ­£åœ¨è¿è¡Œï¼ˆç«¯å£ï¼š8080ï¼‰
3. âœ… AKEç³»ç»Ÿæ¥å£é…ç½®æ­£ç¡®ï¼ˆapplication.ymlä¸­çš„ake.api.base-urlï¼‰

## æµ‹è¯•æ¥å£æ€»è§ˆ

### VIPæœˆç¥¨æµ‹è¯•æ¥å£ï¼ˆ5ä¸ªï¼‰

| æ¥å£ | æ–¹æ³• | è·¯å¾„ | åŠŸèƒ½ |
|------|------|------|------|
| 1 | GET | `/api/sync/test/vip/query` | æŸ¥è¯¢VIPçŠ¶æ€ |
| 2 | POST | `/api/sync/test/vip/add` | å¼€é€šæ–°VIP |
| 3 | POST | `/api/sync/test/vip/update-permission` | æ›´æ–°æƒé™ï¼ˆå…ˆé€€è´¹å†å¼€é€šï¼‰ |
| 4 | POST | `/api/sync/test/vip/update-time` | æ›´æ–°æ—¶é—´ï¼ˆç»­è´¹ï¼‰ |
| 5 | POST | `/api/sync/test/vip/refund` | é€€è´¹VIPï¼ˆæ³¨é”€çŠ¶æ€ï¼‰ |

### é»‘åå•æµ‹è¯•æ¥å£ï¼ˆ5ä¸ªï¼‰

| æ¥å£ | æ–¹æ³• | è·¯å¾„ | åŠŸèƒ½ |
|------|------|------|------|
| 1 | GET | `/api/sync/test/blacklist/query` | æŸ¥è¯¢é»‘åå•çŠ¶æ€ |
| 2 | POST | `/api/sync/test/blacklist/add` | æ·»åŠ æ–°é»‘åå• |
| 3 | POST | `/api/sync/test/blacklist/update-permission` | æ›´æ–°æƒé™ï¼ˆå…ˆåˆ é™¤å†æ·»åŠ ï¼‰ |
| 4 | POST | `/api/sync/test/blacklist/update-time` | æ›´æ–°æ—¶é—´ï¼ˆå…ˆåˆ é™¤å†æ·»åŠ ï¼‰ |
| 5 | POST | `/api/sync/test/blacklist/delete` | åˆ é™¤é»‘åå•ï¼ˆæ³¨é”€çŠ¶æ€ï¼‰ |

## å¿«é€Ÿæµ‹è¯•æ–¹æ³•

### æ–¹æ³•1ï¼šä½¿ç”¨æµ‹è¯•è„šæœ¬ï¼ˆæœ€ç®€å•ï¼‰

#### æµ‹è¯•VIPæœˆç¥¨
```bash
# åŒå‡»è¿è¡Œ
test-vip.bat
```

#### æµ‹è¯•é»‘åå•
```bash
# åŒå‡»è¿è¡Œ
test-blacklist.bat
```

### æ–¹æ³•2ï¼šä½¿ç”¨Postman

1. æ‰“å¼€Postman
2. å¯¼å…¥æµ‹è¯•é›†åˆï¼š
   - `VIPæœˆç¥¨æµ‹è¯•æ¥å£-Postmané›†åˆ.json`
   - `é»‘åå•æµ‹è¯•æ¥å£-Postmané›†åˆ.json`
3. æŒ‰é¡ºåºæ‰§è¡Œè¯·æ±‚

### æ–¹æ³•3ï¼šä½¿ç”¨curlå‘½ä»¤

#### VIPæœˆç¥¨æµ‹è¯•
```bash
# 1. æŸ¥è¯¢çŠ¶æ€
curl "http://localhost:8080/api/sync/test/vip/query?plateNumber=é»‘A88888"

# 2. å¼€é€šVIP
curl -X POST "http://localhost:8080/api/sync/test/vip/add?plateNumber=é»‘A88888&gateNames=åŒ–å·¥è¥¿é—¨&ownerName=æµ‹è¯•ç”¨æˆ·&startTime=2026-01-15 00:00:00&endTime=2026-06-30 23:59:59"

# 3. æ›´æ–°æƒé™
curl -X POST "http://localhost:8080/api/sync/test/vip/update-permission?plateNumber=é»‘A88888&newGateNames=åŒ–å·¥è¥¿é—¨,åŒ–è‚¥è¥¿é—¨&ownerName=æµ‹è¯•ç”¨æˆ·"

# 4. æ›´æ–°æ—¶é—´
curl -X POST "http://localhost:8080/api/sync/test/vip/update-time?plateNumber=é»‘A88888&newStartTime=2026-01-15 00:00:00&newEndTime=2026-12-31 23:59:59&ownerName=æµ‹è¯•ç”¨æˆ·"

# 5. é€€è´¹VIP
curl -X POST "http://localhost:8080/api/sync/test/vip/refund?plateNumber=é»‘A88888"
```

#### é»‘åå•æµ‹è¯•
```bash
# 1. æŸ¥è¯¢çŠ¶æ€
curl "http://localhost:8080/api/sync/test/blacklist/query?plateNumber=é»‘A99999"

# 2. æ·»åŠ é»‘åå•
curl -X POST "http://localhost:8080/api/sync/test/blacklist/add?plateNumber=é»‘A99999&gateNames=åŒ–å·¥è¥¿é—¨&ownerName=æµ‹è¯•ç”¨æˆ·&startTime=2026-01-15 00:00:00&endTime=2026-06-30 23:59:59"

# 3. æ›´æ–°æƒé™
curl -X POST "http://localhost:8080/api/sync/test/blacklist/update-permission?plateNumber=é»‘A99999&newGateNames=åŒ–å·¥è¥¿é—¨,åŒ–è‚¥è¥¿é—¨&ownerName=æµ‹è¯•ç”¨æˆ·"

# 4. æ›´æ–°æ—¶é—´
curl -X POST "http://localhost:8080/api/sync/test/blacklist/update-time?plateNumber=é»‘A99999&newStartTime=2026-01-15 00:00:00&newEndTime=2026-12-31 23:59:59&ownerName=æµ‹è¯•ç”¨æˆ·"

# 5. åˆ é™¤é»‘åå•
curl -X POST "http://localhost:8080/api/sync/test/blacklist/delete?plateNumber=é»‘A99999"
```

## å®Œæ•´æµ‹è¯•æµç¨‹

### æµ‹è¯•æµç¨‹1ï¼šVIPæœˆç¥¨å®Œæ•´ç”Ÿå‘½å‘¨æœŸ

```
1. æŸ¥è¯¢åˆå§‹çŠ¶æ€ï¼ˆåº”è¯¥ä¸å­˜åœ¨ï¼‰
   GET /api/sync/test/vip/query?plateNumber=é»‘A88888

2. å¼€é€šVIPæœˆç¥¨ï¼ˆå•é—¨ï¼‰
   POST /api/sync/test/vip/add
   plateNumber=é»‘A88888&gateNames=åŒ–å·¥è¥¿é—¨&startTime=2026-01-15 00:00:00&endTime=2026-06-30 23:59:59

3. æŸ¥è¯¢çŠ¶æ€ï¼ˆåº”è¯¥å­˜åœ¨ï¼ŒVIPç±»å‹ï¼šåŒ–å·¥è¥¿VIPï¼‰
   GET /api/sync/test/vip/query?plateNumber=é»‘A88888

4. æ›´æ–°æƒé™ï¼ˆæ”¹ä¸ºå¤šé—¨ï¼‰
   POST /api/sync/test/vip/update-permission
   plateNumber=é»‘A88888&newGateNames=åŒ–å·¥è¥¿é—¨,åŒ–è‚¥è¥¿é—¨

5. æŸ¥è¯¢çŠ¶æ€ï¼ˆVIPç±»å‹åº”è¯¥å˜ä¸ºï¼šåŒ–å·¥è¥¿åŒ–è‚¥è¥¿VIPï¼‰
   GET /api/sync/test/vip/query?plateNumber=é»‘A88888

6. æ›´æ–°æ—¶é—´ï¼ˆå»¶é•¿æœ‰æ•ˆæœŸï¼‰
   POST /api/sync/test/vip/update-time
   plateNumber=é»‘A88888&newStartTime=2026-01-15 00:00:00&newEndTime=2026-12-31 23:59:59

7. æŸ¥è¯¢çŠ¶æ€ï¼ˆæœ‰æ•ˆæœŸåº”è¯¥å·²æ›´æ–°ï¼‰
   GET /api/sync/test/vip/query?plateNumber=é»‘A88888

8. é€€è´¹VIP
   POST /api/sync/test/vip/refund
   plateNumber=é»‘A88888

9. æŸ¥è¯¢çŠ¶æ€ï¼ˆåº”è¯¥ä¸å­˜åœ¨æˆ–çŠ¶æ€ä¸ºå·²é€€è´¹ï¼‰
   GET /api/sync/test/vip/query?plateNumber=é»‘A88888
```

### æµ‹è¯•æµç¨‹2ï¼šé»‘åå•å®Œæ•´ç”Ÿå‘½å‘¨æœŸ

```
1. æŸ¥è¯¢åˆå§‹çŠ¶æ€ï¼ˆåº”è¯¥ä¸å­˜åœ¨ï¼‰
   GET /api/sync/test/blacklist/query?plateNumber=é»‘A99999

2. æ·»åŠ é»‘åå•ï¼ˆå•é—¨ï¼Œä¸´æ—¶ï¼‰
   POST /api/sync/test/blacklist/add
   plateNumber=é»‘A99999&gateNames=åŒ–å·¥è¥¿é—¨&startTime=2026-01-15 00:00:00&endTime=2026-06-30 23:59:59

3. æŸ¥è¯¢çŠ¶æ€ï¼ˆåº”è¯¥å­˜åœ¨ï¼Œç±»å‹ï¼šè¯·åœè½¦æ£€æŸ¥ï¼ˆåŒ–å·¥è¥¿ï¼‰ï¼‰
   GET /api/sync/test/blacklist/query?plateNumber=é»‘A99999

4. æ›´æ–°æƒé™ï¼ˆæ”¹ä¸ºå¤šé—¨ï¼‰
   POST /api/sync/test/blacklist/update-permission
   plateNumber=é»‘A99999&newGateNames=åŒ–å·¥è¥¿é—¨,åŒ–è‚¥è¥¿é—¨

5. æŸ¥è¯¢çŠ¶æ€ï¼ˆç±»å‹åº”è¯¥å˜ä¸ºï¼šè¯·åœè½¦æ£€æŸ¥ï¼ˆåŒ–å·¥è¥¿åŒ–è‚¥è¥¿ï¼‰ï¼‰
   GET /api/sync/test/blacklist/query?plateNumber=é»‘A99999

6. æ›´æ–°æ—¶é—´ï¼ˆå»¶é•¿æœ‰æ•ˆæœŸï¼‰
   POST /api/sync/test/blacklist/update-time
   plateNumber=é»‘A99999&newStartTime=2026-01-15 00:00:00&newEndTime=2026-12-31 23:59:59

7. æŸ¥è¯¢çŠ¶æ€ï¼ˆæœ‰æ•ˆæœŸåº”è¯¥å·²æ›´æ–°ï¼‰
   GET /api/sync/test/blacklist/query?plateNumber=é»‘A99999

8. åˆ é™¤é»‘åå•
   POST /api/sync/test/blacklist/delete
   plateNumber=é»‘A99999

9. æŸ¥è¯¢çŠ¶æ€ï¼ˆåº”è¯¥ä¸å­˜åœ¨ï¼‰
   GET /api/sync/test/blacklist/query?plateNumber=é»‘A99999
```

## VIP vs é»‘åå•å¯¹æ¯”

| ç‰¹æ€§ | VIPæœˆç¥¨ | é»‘åå• |
|------|---------|--------|
| **ç±»å‹åç§°æ ¼å¼** | `é—¨åç§°+VIP` | `è¯·åœè½¦æ£€æŸ¥ï¼ˆé—¨åç§°ï¼‰` |
| **ç¤ºä¾‹ï¼ˆå•é—¨ï¼‰** | `åŒ–å·¥è¥¿VIP` | `è¯·åœè½¦æ£€æŸ¥ï¼ˆåŒ–å·¥è¥¿ï¼‰` |
| **ç¤ºä¾‹ï¼ˆå¤šé—¨ï¼‰** | `åŒ–å·¥è¥¿åŒ–è‚¥è¥¿VIP` | `è¯·åœè½¦æ£€æŸ¥ï¼ˆåŒ–å·¥è¥¿åŒ–è‚¥è¥¿ï¼‰` |
| **æƒé™å˜åŒ–å¤„ç†** | å…ˆé€€è´¹ï¼Œå†å¼€é€š | å…ˆåˆ é™¤ï¼Œå†æ·»åŠ  |
| **æ—¶é—´æ›´æ–°å¤„ç†** | è°ƒç”¨ç»­è´¹æ¥å£ | å…ˆåˆ é™¤ï¼Œå†æ·»åŠ  |
| **æ³¨é”€çŠ¶æ€å¤„ç†** | é€€è´¹ï¼ˆ0å…ƒï¼‰ | åˆ é™¤ |
| **æ°¸ä¹…ç±»å‹** | ä¸æ”¯æŒ | æ”¯æŒ |
| **è´¹ç”¨** | 0å…ƒ | N/A |
| **æµ‹è¯•è½¦ç‰Œ** | é»‘A88888 | é»‘A99999 |

## æµ‹è¯•åœºæ™¯è¯´æ˜

### VIPæœˆç¥¨æµ‹è¯•åœºæ™¯

#### åœºæ™¯1ï¼šå¼€é€šæ–°VIP
- **ç›®çš„ï¼š** æµ‹è¯•ä»æ— åˆ°æœ‰å¼€é€šVIP
- **æ“ä½œï¼š** è°ƒç”¨addæ¥å£
- **é¢„æœŸï¼š** VIPç±»å‹åç§°æ­£ç¡®ï¼Œè´¹ç”¨0å…ƒ

#### åœºæ™¯2ï¼šæƒé™å˜åŒ–
- **ç›®çš„ï¼š** æµ‹è¯•VIPæƒé™å˜åŒ–ï¼ˆå…ˆé€€è´¹å†å¼€é€šï¼‰
- **æ“ä½œï¼š** è°ƒç”¨update-permissionæ¥å£
- **é¢„æœŸï¼š** å…ˆé€€è´¹æ—§VIPï¼Œå†å¼€é€šæ–°VIP

#### åœºæ™¯3ï¼šæ—¶é—´æ›´æ–°
- **ç›®çš„ï¼š** æµ‹è¯•VIPæ—¶é—´æ›´æ–°ï¼ˆç»­è´¹ï¼‰
- **æ“ä½œï¼š** è°ƒç”¨update-timeæ¥å£
- **é¢„æœŸï¼š** è°ƒç”¨ç»­è´¹æ¥å£ï¼Œæ—¶é—´æ›´æ–°

#### åœºæ™¯4ï¼šæ³¨é”€çŠ¶æ€
- **ç›®çš„ï¼š** æµ‹è¯•æ³¨é”€çŠ¶æ€é€€è´¹VIP
- **æ“ä½œï¼š** è°ƒç”¨refundæ¥å£
- **é¢„æœŸï¼š** é€€è´¹æˆåŠŸï¼ˆ0å…ƒï¼‰

### é»‘åå•æµ‹è¯•åœºæ™¯

#### åœºæ™¯1ï¼šæ·»åŠ æ–°é»‘åå•
- **ç›®çš„ï¼š** æµ‹è¯•ä»æ— åˆ°æœ‰æ·»åŠ é»‘åå•
- **æ“ä½œï¼š** è°ƒç”¨addæ¥å£
- **é¢„æœŸï¼š** é»‘åå•ç±»å‹åç§°æ­£ç¡®

#### åœºæ™¯2ï¼šæƒé™å˜åŒ–
- **ç›®çš„ï¼š** æµ‹è¯•é»‘åå•æƒé™å˜åŒ–ï¼ˆå…ˆåˆ é™¤å†æ·»åŠ ï¼‰
- **æ“ä½œï¼š** è°ƒç”¨update-permissionæ¥å£
- **é¢„æœŸï¼š** å…ˆåˆ é™¤æ—§é»‘åå•ï¼Œå†æ·»åŠ æ–°é»‘åå•

#### åœºæ™¯3ï¼šæ—¶é—´æ›´æ–°
- **ç›®çš„ï¼š** æµ‹è¯•ä¸´æ—¶é»‘åå•æ—¶é—´æ›´æ–°ï¼ˆå…ˆåˆ é™¤å†æ·»åŠ ï¼‰
- **æ“ä½œï¼š** è°ƒç”¨update-timeæ¥å£
- **é¢„æœŸï¼š** å…ˆåˆ é™¤æ—§é»‘åå•ï¼Œå†æ·»åŠ æ–°é»‘åå•

#### åœºæ™¯4ï¼šæ³¨é”€çŠ¶æ€
- **ç›®çš„ï¼š** æµ‹è¯•æ³¨é”€çŠ¶æ€åˆ é™¤é»‘åå•
- **æ“ä½œï¼š** è°ƒç”¨deleteæ¥å£
- **é¢„æœŸï¼š** åˆ é™¤æˆåŠŸ

## éªŒè¯ç»“æœ

### æˆåŠŸæ ‡å¿— âœ…

- è¿”å›çš„JSONä¸­ `success: true`
- `message` å­—æ®µåŒ…å« "âœ…" ç¬¦å·
- æ“ä½œè¯´æ˜æ¸…æ™°

### å¤±è´¥æ ‡å¿— âŒ

- è¿”å›çš„JSONä¸­ `success: false`
- `message` å­—æ®µåŒ…å« "âŒ" ç¬¦å·
- åŒ…å«å¤±è´¥åŸå› è¯´æ˜

## å¸¸è§é—®é¢˜

### Q1: æ¥å£è¿”å› "æµ‹è¯•æœåŠ¡æœªå¯ç”¨"

**è§£å†³ï¼š** 
1. æ£€æŸ¥ VehicleBlacklistTestService ç±»ä¸Šæœ‰ `@Service` æ³¨è§£
2. é‡å¯åº”ç”¨ç¨‹åº

### Q2: å¼€é€šVIPæˆ–æ·»åŠ é»‘åå•å¤±è´¥

**è§£å†³ï¼š**
1. å…ˆæŸ¥è¯¢çŠ¶æ€ï¼Œç¡®è®¤æ˜¯å¦å·²å­˜åœ¨
2. æ£€æŸ¥AKEæ¥å£é…ç½®ï¼ˆapplication.ymlï¼‰
3. ä½¿ç”¨æ­£ç¡®çš„é—¨åç§°æ ¼å¼

### Q3: æ›´æ–°å¤±è´¥

**è§£å†³ï¼š**
1. ç¡®è®¤è½¦è¾†å·²å­˜åœ¨VIPæˆ–é»‘åå•
2. æ£€æŸ¥æ—¥å¿—æŸ¥çœ‹å…·ä½“é”™è¯¯

### Q4: curlå‘½ä»¤ä¸­æ–‡ä¹±ç 

**è§£å†³ï¼š**
1. ä½¿ç”¨æµ‹è¯•è„šæœ¬ï¼ˆå·²è®¾ç½®UTF-8ï¼‰
2. æˆ–ä½¿ç”¨Postman

## æ”¯æŒçš„é—¨åç§°

1. ç‚¼æ²¹å—é—¨
2. ç‚¼æ²¹å—ä¸€
3. ç‚¼æ²¹è¥¿ä¸€
4. ç‚¼æ²¹è¥¿é—¨
5. ç‚¼æ²¹ä¸œé—¨
6. åŒ–è‚¥è¥¿é—¨
7. åŒ–å·¥è¥¿é—¨ â­ï¼ˆæ¨èæµ‹è¯•ï¼‰
8. åŒ–å·¥åŒ—é—¨
9. åŒ–å·¥ä¸œé—¨
10. åŒ–ä¸‰å—é—¨
11. å¤åˆè‚¥å—é—¨ â­ï¼ˆæ¨èæµ‹è¯•ï¼‰
12. æœºä¿®å‚è¥¿ä¸€
13. äºŒç½åŒºæ­£é—¨

**æ˜ å°„è§„åˆ™ï¼š** Oracleå®Œæ•´åç§° â†’ akeç®€åŒ–åç§°ï¼ˆå»é™¤"é—¨"å­—åç¼€ï¼‰

## ä¸‹ä¸€æ­¥

æµ‹è¯•æˆåŠŸåï¼š

1. âœ… æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶ï¼ˆnefuSystem.logï¼‰
2. âœ… åœ¨AKEç³»ç»Ÿä¸­éªŒè¯æ•°æ®
3. âœ… å¯ç”¨è‡ªåŠ¨åŒæ­¥ä»»åŠ¡
4. âœ… ä»Oracleæ•°æ®åº“åŒæ­¥çœŸå®æ•°æ®

## ç›¸å…³æ–‡æ¡£

### VIPæœˆç¥¨
- ğŸ“„ `VIPæœˆç¥¨åŒæ­¥æµ‹è¯•æ¥å£è¯´æ˜.md` - è¯¦ç»†æ¥å£æ–‡æ¡£
- ğŸ“„ `VIPæœˆç¥¨æµ‹è¯•æ¥å£-Postmané›†åˆ.json` - Postmané›†åˆ
- ğŸ“„ `test-vip.bat` - è‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬

### é»‘åå•
- ğŸ“„ `é»‘åå•åŒæ­¥æµ‹è¯•æ¥å£è¯´æ˜.md` - è¯¦ç»†æ¥å£æ–‡æ¡£
- ğŸ“„ `é»‘åå•æµ‹è¯•æ¥å£-Postmané›†åˆ.json` - Postmané›†åˆ
- ğŸ“„ `test-blacklist.bat` - è‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬

### è®¾è®¡æ–‡æ¡£
- ğŸ“„ `.kiro/specs/daqing-petrochemical-sync/design.md` - å®Œæ•´è®¾è®¡æ–‡æ¡£
- ğŸ“„ `.kiro/specs/daqing-petrochemical-sync/requirements.md` - éœ€æ±‚æ–‡æ¡£
- ğŸ“„ `.kiro/specs/daqing-petrochemical-sync/tasks.md` - ä»»åŠ¡åˆ—è¡¨

---

**ç¥æµ‹è¯•é¡ºåˆ©ï¼** ğŸ‰

**æ–‡æ¡£ç‰ˆæœ¬ï¼š** 1.0  
**åˆ›å»ºæ—¥æœŸï¼š** 2026-01-15  
**ä½œè€…ï¼š** Kiro AI Assistant
